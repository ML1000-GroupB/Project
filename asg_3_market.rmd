---
output:
  pdf_document: default
  html_document: default
---

Instacart Market Basket Analysis dataset obtained from https://www.kaggle.com/c/instacart-market-basket-analysis/data (https://www.kaggle.com/c/instacart-market-basket-analysis/data)

```{r}
setwd("C:/Users/qt09n/Desktop/market")

library(tidyr)
library(dplyr)
```


```{r}
aisles <- read.csv("aisles.csv")
department <- read.csv("departments.csv")
orders <- read.csv("orders.csv")
order_products_prior <- read.csv("order_products__prior.csv")
order_products_train <- read.csv("order_products__train.csv")
products <- read.csv("products.csv")
sample_submission <- read.csv("sample_submission.csv")

```


datasets have different number of rows, may be hard to combine

select which dataset to include??

```{r}
str(order_products_prior)
```
32434489 obs. of  4 variable:

```{r}
str(orders)
```
```{r}
str(products)
```

```{r}
str(order_products_train)
```

```{r}
str(order_products_prior)
```
```{r}
str(aisles)
```   

```{r}
str(department)
```
```{r}
attributes <-c("aisle_id", "aisle", "department_id", "department", "order_id", "product_id","add_to_cart_order", "reordered", "product_name", "user_id", "order_number", "order_dow", "order_hour_of_day", "days_since_prior_order", "eval_set" )
```

```{r}
length(attributes)
```
```{r}

length(unique(aisles$aisle_id))
```
```{r}
length(unique(aisles$aisle))
```

```{r}
#merge aisles and products data frame by aisle_id
combined <- merge(products, aisles, by="aisle_id")

#join department with combined(aisles + products dataset) by common department_id column
combined2 <- merge(combined, department, by="department_id")
```

#Info about Order_products__*.csv from Kaggle website:

order_products__*.csv

These files specify which products were purchased in each order. order_products__prior.csv contains previous order contents for all customers. 'reordered' indicates that the customer has a previous order that contains the product. Note that some orders will have no reordered items. You may predict an explicit 'None' value for orders with no reordered items. See the evaluation page for full details.


orders.csv

This file tells to which set (prior, train, test) an order belongs. You are predicting reordered items only for the test set orders. 'order_dow' is the day of week.


```{r}
glimpse(orders)
```

```{r}
glimpse(order_products_prior)

```

```{r}
glimpse(order_products_train)
```

```{r}
unique(orders$eval_set)
```

we are predicting reordered items only for the test set orders. 'order_dow' is the day of week.

To make a separate dataframe for test data:
```{r}
test <- orders[orders$eval_set=="test",]
```


To make a separate dataframe just for the train and prior rows from the eval_set column of orders:
```{r}
orders_train_prior <- dplyr::filter(orders, eval_set %in% c("prior", "train"))
```

